!function($){"use strict";function viewport(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}}var $window=$(window),_detect_mobile=function(){"ontouchstart"in document.documentElement?document.documentElement.className+=" touch":document.documentElement.className+=" no-touch"},getYotubeID=function(e){var t;return t=e.indexOf("youtu.be")>0?e.substr(e.lastIndexOf("/")+1,e.length):e.indexOf("http")>-1?e.match(/[\\?&]v=([^&#]*)/)[1]:e.length>15?null:e};$window.load(function(){var e=$(".text-fill-container-canvas");e.length>0&&(e.textFill({relative:!0,relativeWrap:".perfect-grid-item"}),e.on("textfill-render-complete",function(){$window.resize()})),$(".perfect-grid-gallery").textResize(),"undefined"!=typeof _plugin_frontend_settings&&1==_plugin_frontend_settings.animations&&$(".rs-animation").rexScrollify({mobile:!1});var t=$(".perfect-grid-gallery[data-layout=fixed][data-full-height=true] .text-content .rex-custom-scrollbar");t.mCustomScrollbar(),0!=t.length&&$window.resize(function(){viewport().width<768?t.mCustomScrollbar("destroy"):t.mCustomScrollbar()})}),$(function(){function updateNavigation(){contentSections.each(function(){var e=$(this);if("undefined"!=typeof e.attr("id")&&""!=e.attr("id")){var t=$('#rex-vertical-nav a[href="#'+e.attr("id")+'"]').data("number")-1;e.offset().top-$window.height()/2<$window.scrollTop()&&e.offset().top+e.height()-$window.height()/2>$window.scrollTop()?navigationItems.eq(t).addClass("is-selected"):navigationItems.eq(t).removeClass("is-selected")}})}function smoothScroll(e){$("body,html").animate({scrollTop:e.offset().top},600)}_detect_mobile(),$(".perfect-grid-gallery").perfectGridGallery(),initPhotoSwipeFromDOM(".photoswipe-gallery"),jQuery.browser.mobile?$(".youtube-player").each(function(i,el){var $this=$(el),data_yt=eval("("+$this.attr("data-property")+")"),url=data_yt.videoURL,id=getYotubeID(url);$this.css("background-image","url(http://img.youtube.com/vi/"+id+"/0.jpg)"),$this.click(function(e){e.preventDefault(),window.location.href=url})}):($(".youtube-player").YTPlayer(),$(".youtube-player").on("YTPReady",function(){$(this).optimizeDisplay()})),$(document).on("click",".perfect-grid-item",function(){var e=$(this).find(".youtube-player"),t=$(this).find(".rex-video-container");if(e.length>0){var n=e[0].state;1==n?e.YTPPause():e.YTPPlay()}t.length>0&&(t.get(0).paused?t.get(0).play():t.get(0).pause())}),$(".perfect-grid-item").on("click",".rex-video-toggle-audio",function(e){e.stopPropagation();var t=$(this).parents(".youtube-player"),n=$(this).parents(".mp4-player").find(".rex-video-container");if(t.length>0){var i=t.get(0).player.isMuted();i?(t.YTPUnmute(),$(this).removeClass("user-has-muted")):(t.YTPMute(),$(this).addClass("user-has-muted"))}n.length>0&&(n.prop("muted")?(n.prop("muted",!1),$(this).removeClass("user-has-muted")):(n.prop("muted",!0),$(this).addClass("user-has-muted")))}),$('a[href*="#"]:not([href="#"]):not(.rex-vertical-nav-link)').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash);if(e=e.length?e:$("[name="+this.hash.slice(1)+"]"),e.length)return $("html, body").animate({scrollTop:e.offset().top},600),!1}});var contentSections=$(".rexpansive_section"),navigationItems=$("#rex-vertical-nav a");updateNavigation(),$window.on("scroll",function(){updateNavigation()}),navigationItems.on("click",function(e){e.preventDefault(),smoothScroll($(this.hash))}),$(".touch .rex-nav-trigger").on("click",function(){$(".touch #rex-vertical-nav").toggleClass("open")});var $touch_navigation_links=$(".touch #rex-vertical-nav a");$touch_navigation_links.on("click",function(){$touch_navigation_links.find(".rex-label").removeClass("fadeInAndOut"),$(this).find(".rex-label").addClass("fadeInAndOut"),$(".touch #rex-vertical-nav").removeClass("open")})});var initPhotoSwipeFromDOM=function(e){for(var t=function(e){for(var t,n,i,a,o=$(e).find(".pswp-figure").get(),r=o.length,l=[],s=0;r>s;s++)t=o[s],1===t.nodeType&&(n=t.children[0],i=n.getAttribute("data-size").split("x"),a={src:n.getAttribute("href"),w:parseInt(i[0],10),h:parseInt(i[1],10)},t.children.length>1&&(a.title=t.children[1].innerHTML),n.children.length>0&&(a.msrc=n.children[0].getAttribute("data-thumburl")),a.el=t,l.push(a));return l},n=function c(e,t){return e&&(t(e)?e:c(e.parentNode,t))},i=function(t){if(t=t||window.event,!($(t.target).parents(".perfect-grid-item").find(".element-link").length>0||$(t.target).is("a"))){t.preventDefault?t.preventDefault():t.returnValue=!1;var i=t.target||t.srcElement,a=n(i,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(a){for(var r,l=$(a).parents(e)[0],s=$(l).find(".pswp-figure").get(),u=s.length,c=0,d=0;u>d;d++)if(1===s[d].nodeType){if(s[d]===a){r=c;break}c++}return r>=0&&o(r,l),!1}}},a=function(){var e=window.location.hash.substring(1),t={};if(e.length<5)return t;for(var n=e.split("&"),i=0;i<n.length;i++)if(n[i]){var a=n[i].split("=");a.length<2||(t[a[0]]=a[1])}return t.gid&&(t.gid=parseInt(t.gid,10)),t},o=function(e,n,i,a){var o,r,l,s=document.querySelectorAll(".pswp")[0];if(l=t(n),r={galleryUID:n.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=l[e].el.getElementsByClassName("pswp-item-thumb")[0],n=l[e].el.getElementsByClassName("rex-custom-scrollbar")[0],i=window.pageYOffset||document.documentElement.scrollTop,a=n.getBoundingClientRect(),o=t.getAttribute("data-thumb-image-type");return"natural"==o?{x:a.left,y:a.top+i,w:a.width}:null},closeOnScroll:!1,showHideOpacity:!0},a)if(r.galleryPIDs){for(var u=0;u<l.length;u++)if(l[u].pid==e){r.index=u;break}}else r.index=parseInt(e,10)-1;else r.index=parseInt(e,10);isNaN(r.index)||(i&&(r.showAnimationDuration=0),o=new PhotoSwipe(s,PhotoSwipeUI_Default,l,r),o.init())},r=document.querySelectorAll(e),l=0,s=r.length;s>l;l++)r[l].setAttribute("data-pswp-uid",l+1),r[l].onclick=i;var u=a();u.pid&&u.gid&&o(u.pid,r[u.gid-1],!0,!0)},rexpansiveSections=document.getElementsByClassName("rexpansive_section"),index=0;for(index=0;index<rexpansiveSections.length;index++){var thisSection=rexpansiveSections[index],pswchilds=thisSection.getElementsByClassName("pswp-figure");0===pswchilds.length&&$(thisSection).removeClass("photoswipe-gallery")}}(jQuery);